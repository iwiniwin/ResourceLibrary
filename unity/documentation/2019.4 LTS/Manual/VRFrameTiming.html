<!DOCTYPE html><html class="no-js" lang="zh-cn">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!-- <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-5V25JL6');
    </script> -->
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="twitter:card" content="summary">
<meta property="og:title" content="VR 帧计时 - Unity 手册">
<title>VR 帧计时 - Unity 手册</title>
<meta name="description" content="VR 模式下的帧计时与支持 VSync 的非 VR 模式下的帧计时完全相同（请参阅事件函数执行顺序文档）。唯一的区别是 Unity 不依赖于底层 3D SDK 的 VSync，而是基于当前渲染所使用的 VR SDK。渲染速度快于显示器刷新速度没有任何好处。相反，Unity 注重于最大限度提高时间的利用效率。">
<meta property="og:description" content="VR 模式下的帧计时与支持 VSync 的非 VR 模式下的帧计时完全相同（请参阅事件函数执行顺序文档）。唯一的区别是 Unity 不依赖于底层 3D SDK 的 VSync，而是基于当前渲染所使用的 VR SDK。渲染速度快于显示器刷新速度没有任何好处。相反，Unity 注重于最大限度提高时间的利用效率。">
<meta name="author" content="Unity Technologies">
<link rel="shortcut icon" href="https://unity.com/themes/contrib/unity_base/images/favicons/favicon.ico">
<link rel="icon" type="image/png" href="../StaticFiles/images/favicons/favicon.png">
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="../StaticFiles/images/favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../StaticFiles/images/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="../StaticFiles/images/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../StaticFiles/images/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="../StaticFiles/images/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon-precomposed" href="../StaticFiles/images/favicons/apple-touch-icon.png">
<meta name="msapplication-TileColor" content="#222c37">
<meta name="msapplication-TileImage" content="../StaticFiles/images/favicons/tileicon-144x144.png">
<script type="text/javascript">
        function OptanonWrapper() { }
    </script><script>
      var docs_type = 'Manual';
      var lang = 'cn';
      var page = 'VRFrameTiming';
      if(!page) page = 'index';
      var version = '2019.4';
      var docs_versions = [{version: '2021.1',version_string: '2021.1',supported: true},{version: '2020.3',version_string: '2020.3',supported: true},{version: '2020.2',version_string: '2020.2',supported: false},{version: '2020.1',version_string: '2020.1',supported: false},{version: '2019.4',version_string: '2019.4',supported: true},{version: '2019.3',version_string: '2019.3',supported: false},{version: '2019.2',version_string: '2019.2',supported: false},{version: '2019.1',version_string: '2019.1',supported: false},{version: '2018.4',version_string: '2018.4',supported: true},{version: '2018.3',version_string: '2018.3',supported: false},{version: '2018.2',version_string: '2018.2',supported: false},{version: '2018.1',version_string: '2018.1',supported: false},{version: '2017.4',version_string: '2017.4',supported: false},{version: '2017.3',version_string: '2017.3',supported: false},{version: '2017.2',version_string: '2017.2',supported: false},{version: '2017.1',version_string: '2017.1',supported: false},{version: '5.6',version_string: '560',supported: false},];</script><script type="text/javascript" src="../StaticFiles/js/jquery.js"></script><script type="text/javascript" src="../StaticFiles/js/core.js"></script><script type="text/javascript" src="../StaticFiles/js/jquery.sidebar.min.js"></script><script type="text/javascript" src="docdata/toc.js"></script><script type="text/javascript" src=""></script><script type="text/javascript" src="../StaticFiles/js/custom.js"></script><link rel="stylesheet" type="text/css" href="../StaticFiles/css/core.css">
<link rel="stylesheet" type="text/css" href="../StaticFiles/css/custom.css">
<link rel="canonical" href="https://docs.unity3d.com/cn/2019.4/Manual/VRFrameTiming.html">
<link rel="alternate" href="https://docs.unity3d.com/en/2019.4/Manual/VRFrameTiming.html" hreflang="en">
<link rel="alternate" href="https://docs.unity3d.com/cn/2019.4/Manual/VRFrameTiming.html" hreflang="zh">
<link rel="alternate" href="https://docs.unity3d.com/ja/2019.4/Manual/VRFrameTiming.html" hreflang="ja">
<link rel="alternate" href="https://docs.unity3d.com/es/2019.4/Manual/VRFrameTiming.html" hreflang="es">
<link rel="alternate" href="https://docs.unity3d.com/kr/2019.4/Manual/VRFrameTiming.html" hreflang="ko">
<link rel="alternate" href="https://docs.unity3d.com/ru/2019.4/Manual/VRFrameTiming.html" hreflang="ru">
<link rel="alternate" href="https://docs.unity3d.com/2019.4/Documentation/Manual/VRFrameTiming.html" hreflang="x-default">
</head>
<body>
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5V25JL6" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<div class="header-wrapper">
<div id="header" class="header"><div class="content">
<div class="spacer"><div class="menu">
<div id="nav-open" for="nav-input"><span></span></div>
<div class="logo"><a href="./index.html"></a></div>
<div class="search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="搜索手册..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" class="submit">
</form></div>
<ul class="menu-items">
<li class="menu-item"><a href="../Manual/index.html" class="selected">手册</a></li>
<li class="menu-item"><a href="../ScriptReference/index.html" class="">脚本 API</a></li>
</ul>
</div></div>
<div class="more">
<div class="filler"></div>
<ul><li><a href="https://unity3d.com/">
                unity3d.com
              </a></li></ul>
</div>
</div></div>
<div class="toolbar"><div class="content">
<div class="version-switcher">
<div class="current toggle" data-target=".version-list"><div class="version-number">
<div class="d-inline-block">
          Version:
          <b>2019.4</b>
</div>
<div class="d-inline-block arrow"></div>
</div></div>
<div class="version-list" style="display:none;">
<ul class="versions">
<li class="supported"><a class="docs_version_url_2021.1" href="/cn/2021.1/Manual/VRFrameTiming.html">2021.1</a></li>
<li class="supported"><a class="docs_version_url_2020.3" href="/cn/2020.3/Manual/VRFrameTiming.html">2020.3</a></li>
<li class=""><a class="docs_version_url_2020.2" href="/cn/2020.2/Manual/VRFrameTiming.html">2020.2</a></li>
<li class=""><a class="docs_version_url_2020.1" href="/cn/2020.1/Manual/VRFrameTiming.html">2020.1</a></li>
<li class="supported"><a class="docs_version_url_2019.4" href="/cn/2019.4/Manual/VRFrameTiming.html">2019.4</a></li>
<li class=""><a class="docs_version_url_2019.3" href="/cn/2019.3/Manual/VRFrameTiming.html">2019.3</a></li>
<li class=""><a class="docs_version_url_2019.2" href="/cn/2019.2/Manual/VRFrameTiming.html">2019.2</a></li>
<li class=""><a class="docs_version_url_2019.1" href="/cn/2019.1/Manual/VRFrameTiming.html">2019.1</a></li>
<li class="supported"><a class="docs_version_url_2018.4" href="/cn/2018.4/Manual/VRFrameTiming.html">2018.4</a></li>
<li class=""><a class="docs_version_url_2018.3" href="/cn/2018.3/Manual/VRFrameTiming.html">2018.3</a></li>
<li class=""><a class="docs_version_url_2018.2" href="/cn/2018.2/Manual/VRFrameTiming.html">2018.2</a></li>
<li class=""><a class="docs_version_url_2018.1" href="/cn/2018.1/Manual/VRFrameTiming.html">2018.1</a></li>
<li class=""><a class="docs_version_url_2017.4" href="/cn/2017.4/Manual/VRFrameTiming.html">2017.4</a></li>
<li class=""><a class="docs_version_url_2017.3" href="/cn/2017.3/Manual/VRFrameTiming.html">2017.3</a></li>
<li class=""><a class="docs_version_url_2017.2" href="/cn/2017.2/Manual/VRFrameTiming.html">2017.2</a></li>
<li class=""><a class="docs_version_url_2017.1" href="/cn/2017.1/Manual/VRFrameTiming.html">2017.1</a></li>
<li class=""><a class="docs_version_url_560" href="/cn/560/Manual/VRFrameTiming.html">5.6</a></li>
<div class="versionsWithThisPage" style="display:none;"><li><p>包含此页的版本：</p></li></div>
<div class="versionsWithoutThisPage" style="display:none;"><li><p>不含此页的版本：</p></li></div>
</ul>
<ul class="description">
<li>
<div class="supported-box"></div>受支持</li>
<li>
<div class="legacy-box"></div>旧版</li>
</ul>
</div>
</div>
<ul class="nav-menu-items">
<li class="menu-item"><a href="../Manual/index.html" class="selected">手册</a></li>
<li class="menu-item"><a href="../ScriptReference/index.html" class="">脚本 API</a></li>
</ul>
<div class="lang-switcher">
<div class="current toggle" data-target=".lang-list">
<div class="lbl">语言:
        <span class="b">中文</span>
</div>
<div class="arrow"></div>
</div>
<div class="lang-list" style="display:none;"><ul>
<li><a data-lang="en" href="/2019.4/Documentation/Manual/VRFrameTiming.html">English</a></li>
<li><a data-lang="cn" href="/cn/2019.4/Manual/VRFrameTiming.html">中文</a></li>
<li><a data-lang="ja" href="/ja/2019.4/Manual/VRFrameTiming.html">日本語</a></li>
<li><a data-lang="es" href="/es/2019.4/Manual/VRFrameTiming.html">Español</a></li>
<li><a data-lang="kr" href="/kr/2019.4/Manual/VRFrameTiming.html">한국어</a></li>
<li><a data-lang="ru" href="/ru/2019.4/Manual/VRFrameTiming.html">Русский</a></li>
</ul></div>
</div>
</div></div>
</div>
<div id="master-wrapper" class="master-wrapper clear">
<div id="sidebar" class="sidebar hidden"><div class="sidebar-wrap"><div class="content"><div class="sidebar-menu"><div class="toc">
<h2>手册</h2>
<div class="version-switcher">
<div class="current toggle" data-target=".version-list"><div class="version-number">
<div class="d-inline-block">
          Version:
          <b>2019.4</b>
</div>
<div class="d-inline-block arrow"></div>
</div></div>
<div class="version-list" style="display:none;">
<ul class="versions">
<li class="supported"><a class="docs_version_url_2021.1" href="/cn/2021.1/Manual/VRFrameTiming.html">2021.1</a></li>
<li class="supported"><a class="docs_version_url_2020.3" href="/cn/2020.3/Manual/VRFrameTiming.html">2020.3</a></li>
<li class=""><a class="docs_version_url_2020.2" href="/cn/2020.2/Manual/VRFrameTiming.html">2020.2</a></li>
<li class=""><a class="docs_version_url_2020.1" href="/cn/2020.1/Manual/VRFrameTiming.html">2020.1</a></li>
<li class="supported"><a class="docs_version_url_2019.4" href="/cn/2019.4/Manual/VRFrameTiming.html">2019.4</a></li>
<li class=""><a class="docs_version_url_2019.3" href="/cn/2019.3/Manual/VRFrameTiming.html">2019.3</a></li>
<li class=""><a class="docs_version_url_2019.2" href="/cn/2019.2/Manual/VRFrameTiming.html">2019.2</a></li>
<li class=""><a class="docs_version_url_2019.1" href="/cn/2019.1/Manual/VRFrameTiming.html">2019.1</a></li>
<li class="supported"><a class="docs_version_url_2018.4" href="/cn/2018.4/Manual/VRFrameTiming.html">2018.4</a></li>
<li class=""><a class="docs_version_url_2018.3" href="/cn/2018.3/Manual/VRFrameTiming.html">2018.3</a></li>
<li class=""><a class="docs_version_url_2018.2" href="/cn/2018.2/Manual/VRFrameTiming.html">2018.2</a></li>
<li class=""><a class="docs_version_url_2018.1" href="/cn/2018.1/Manual/VRFrameTiming.html">2018.1</a></li>
<li class=""><a class="docs_version_url_2017.4" href="/cn/2017.4/Manual/VRFrameTiming.html">2017.4</a></li>
<li class=""><a class="docs_version_url_2017.3" href="/cn/2017.3/Manual/VRFrameTiming.html">2017.3</a></li>
<li class=""><a class="docs_version_url_2017.2" href="/cn/2017.2/Manual/VRFrameTiming.html">2017.2</a></li>
<li class=""><a class="docs_version_url_2017.1" href="/cn/2017.1/Manual/VRFrameTiming.html">2017.1</a></li>
<li class=""><a class="docs_version_url_560" href="/cn/560/Manual/VRFrameTiming.html">5.6</a></li>
<div class="versionsWithThisPage" style="display:none;"><li><p>包含此页的版本：</p></li></div>
<div class="versionsWithoutThisPage" style="display:none;"><li><p>不含此页的版本：</p></li></div>
</ul>
<ul class="description">
<li>
<div class="supported-box"></div>受支持</li>
<li>
<div class="legacy-box"></div>旧版</li>
</ul>
</div>
</div>
<div class="clear"></div>
</div></div></div></div></div>
<div id="content-wrap" class="content-wrap opened-sidebar"><div class="content-block"><div class="content">
<div class="section">
<div class="breadcrumbs clear"><ul>
<li><a href="UnityManual.html">Unity 用户手册 (2019.4 LTS)</a></li>
<li><a href="XR.html">XR</a></li>
<li>VR 帧计时</li>
</ul></div>
<div class="mb20"><div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="VRAudioSpatializer.html"></a></span><div class="tip">VR 空间音响</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="OpenSourceRepositories.html"></a></span><div class="tip">开源代码仓库</div>
</div>
</div></div>
<h1>VR 帧计时</h1>
<!--BeginSwitchLink--><!--EndSwitchLink-->
<div class="clear"></div>

<p>VR 模式下的帧计时与支持 VSync 的非 VR 模式下的帧计时完全相同（请参阅<a href="ExecutionOrder.html">事件函数执行顺序</a>文档）。唯一的区别是 Unity 不依赖于底层 3D SDK 的 VSync，而是基于当前渲染所使用的 VR SDK。渲染速度快于显示器刷新速度没有任何好处。相反，Unity 注重于最大限度提高时间的利用效率。</p>

<p>在多线程渲染中，Unity 会同步模拟线程和 CPU 上的渲染线程。这会减少延迟。模拟线程主要执行脚本、声音、AI 以及运行模拟所需的其他任务。渲染线程侧重于向图形驱动程序提交绘制调用，而图形驱动程序会验证绘制调用并将它们发送到 GPU。为了实现线程之间的最大并行度，Unity 在图形命令进入时执行这些命令，并与此同时模拟下一帧。</p>

<p>Unity 等待 GPU 完全渲染并显示上一帧，然后提交下一帧的渲染命令。</p>

<h2>尽可能最低的延迟</h2>

<p>在 Unity 提交依赖于视图变换矩阵的第一个渲染命令之前，必须首先从 VR SDK 获取该视图矩阵。为了尽可能降低延迟，VR SDK 会在每帧预测两次头部变换：</p>

<ul>
<li><p>一个预测用于渲染当前帧。此预测对应于当帧到达屏幕时您的头部在实际空间中的实际位置。</p></li>
<li><p>一个预测用于模拟下一帧。</p></li>
</ul>

<p>Unity 将当前帧的渲染预测应用于摄像机、控制器以及需要相关信息以进行场景渲染的任何组件。如果无法渲染下一帧，Unity 将对下一帧使用模拟预测。</p>

<p>如需了解硬件如何处理渲染的更多信息，请参阅制造商的头戴式显示器文档。</p>

<h2>Unity 丢帧时会发生什么情况？</h2>

<p>如果 Unity 未及时提交完全渲染的帧以使其为下一次显示刷新做好准备，则可能会发生一些情况，具体情况取决于当前使用的是哪个 VR SDK。VR SDK 可能：</p>

<ul>
<li><p>显示先前提交的帧。这种情况下看起来像是抖动，并会大大降低体验品质。</p></li>
<li><p>根据当前头部姿势以旋转的方式重新投影先前提交的帧。这是一种粗略的近似，很适合作为静态内容的后备，但任何具有动画或位置移动的内容则会看起来不正确。</p></li>
<li><p>应用某种形式的位置重投影。这可能是暂时的，用于填补遗漏的细节。</p></li>
</ul>

<p>有关重投影（有时称为时间规整）的更多信息，请参阅 XinReality 上有关 <a href="https://xinreality.com/wiki/Timewarp">Timewarp</a> 的 Wiki 条目。</p>

<p>这一切都是自动发生的。此时对 Unity 而言通常已经太迟了，无法成功完成本应该已经在渲染的下一帧。相反，VR SDK 接受其收到的上一帧并将其重投影到最新的预测姿势，而 Unity 将等待下一次渲染一个完整帧的机会以重回正轨。如果您的应用程序持续丢帧，Unity 将每隔一帧进行渲染。</p>

<p>如需了解硬件如何处理渲染的更多信息，请参阅制造商的头戴式显示器文档。</p>

<h2>VR 中的 GPU 密集型与 CPU 密集型</h2>

<p>每个显示器都具有 Unity 绑定的特定刷新率。可以在运行时使用 <a href="../ScriptReference/XR.XRDevice-refreshRate.html">VRDevice.refreshRate</a> 获取此刷新率。1 除以 <code>refreshRate</code> 得到的值将是分配给单个帧的时间。</p>

<p>例如，在刷新率为 90 赫兹的情况下，此时间可能为 11.1 毫秒。</p>

<ul>
<li><p>如果您的应用程序是 GPU 密集型，Unity Profiler 会显示超过一帧时间（以毫秒为单位）的 <code>XR.WaitForGPU</code>。</p></li>
<li><p>如果您的应用程序是 CPU 密集型，则一帧占用的时间比指定的帧时间长，但 Unity Profiler 会显示短于一帧的 <code>XR.WaitForGPU</code>。</p></li>
</ul>
<!-- area:platforms -->
<div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="VRAudioSpatializer.html"></a></span><div class="tip">VR 空间音响</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="OpenSourceRepositories.html"></a></span><div class="tip">开源代码仓库</div>
</div>
</div>
</div>
<div class="footer-wrapper">
<div class="footer clear">
<div class="copy">版权所有 © 2020 Unity Technologies. Publication 2019.4</div>
<div class="menu">
<a href="https://learn.unity.com/">教程</a><a href="https://answers.unity3d.com">社区答案</a><a href="https://support.unity3d.com/hc/en-us">知识库</a><a href="https://forum.unity3d.com">论坛</a><a href="https://unity3d.com/asset-store">Asset Store</a>
</div>
</div>
<div></div>
</div>
</div></div></div>
</div>
</body>
</html>
